@model IEnumerable<LaptopBMT.Models.Product>
@{
    ViewData["Title"] = "Trang chủ";
}

<!-- HERO BANNER -->
<div class="container mt-4">
    <div id="heroCarousel" class="carousel slide shadow-sm rounded-4 overflow-hidden" data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="~/images/banner/banner1.jpg" class="d-block w-100 hero-img">
            </div>
            <div class="carousel-item">
                <img src="~/images/banner/banner2.jpg" class="d-block w-100 hero-img">
            </div>
            <div class="carousel-item">
                <img src="~/images/banner/banner3.jpg" class="d-block w-100 hero-img">
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
        </button>
    </div>
</div>

<!-- CATEGORY -->
<section class="py-5 bg-white">
    <div class="container">
        <h3 class="fw-bold mb-4 text-primary text-center">Danh mục nổi bật</h3>
        <div class="row text-center g-4">

            <div class="col-4 col-md-4">
                <a asp-controller="Laptops" asp-action="Gaming" class="cat-box">
                    <img src="~/images/catalog/Gaming.jpg" class="cat-img">
                    <p class="mt-2 fw-semibold">Laptop Gaming</p>
                </a>
            </div>

            <div class="col-4 col-md-4">
                <a asp-controller="Laptops" asp-action="Office" class="cat-box">
                    <img src="~/images/catalog/office.jpg" class="cat-img">
                    <p class="mt-2 fw-semibold">Laptop Văn Phòng</p>
                </a>
            </div>

            <div class="col-4 col-md-4">
                <a asp-controller="Laptops" asp-action="Design" class="cat-box">
                    <img src="~/images/catalog/design.jpg" class="cat-img">
                    <p class="mt-2 fw-semibold">Laptop Đồ Họa</p>
                </a>
            </div>

        </div>
    </div>
</section>

<!-- FEATURED PRODUCTS -->
<div class="container mb-5">
    <h3 class="fw-bold text-primary text-center mb-4">🔥 Sản phẩm nổi bật</h3>
    <div class="row g-4">

        @foreach (var item in Model)
        {
            <div class="col-md-3 col-6">
                <div class="product-card shadow-sm rounded-4 p-3 h-100">

                    <img src="@Url.Content(string.IsNullOrEmpty(item.ImageUrl)
                                                  ? "~/images/no-image.png"
                                                  : (item.ImageUrl.StartsWith("/") || item.ImageUrl.StartsWith("~/")
                                                      ? item.ImageUrl
                                                      : "~/images/product_img/" + item.ImageUrl))"
                     class="product-img" alt="@item.Name" />

                    <h6 class="fw-bold mt-2 text-dark text-truncate">@item.Name</h6>
                    <p class="text-danger fw-bold">@item.Price.ToString("N0") đ</p>

                    <div class="d-flex justify-content-between">
                        <a asp-controller="ProductDetail" asp-action="Detail" asp-route-id="@item.ProductId"
                           class="btn btn-sm btn-primary w-50 me-1">Xem</a>

                        <form asp-controller="Cart" asp-action="AddToCart" method="post" class="w-50 ms-1">
                            <input type="hidden" name="laptopId" value="@item.ProductId" />
                            <button type="submit" class="btn btn-sm btn-success w-100">
                                <i class="bi bi-cart-plus"></i>
                            </button>
                        </form>
                    </div>

                </div>
            </div>
                }

    </div>
</div>

<!-- PAGINATION -->
<div class="d-flex justify-content-center mt-3">
    <nav>
        <ul class="pagination pagination-lg">

            <li class="page-item @(ViewBag.CurrentPage == 1 ? "disabled" : "")">
                <a class="page-link" href="?page=@(ViewBag.CurrentPage - 1)">←</a>
            </li>

            @for (int i = 1; i <= ViewBag.TotalPages; i++)
            {
                <li class="page-item @(ViewBag.CurrentPage == i ? "active" : "")">
                    <a class="page-link" href="?page=@i">@i</a>
                </li>
            }

            <li class="page-item @(ViewBag.CurrentPage == ViewBag.TotalPages ? "disabled" : "")">
                <a class="page-link" href="?page=@(ViewBag.CurrentPage + 1)">→</a>
            </li>

        </ul>
    </nav>
</div>
